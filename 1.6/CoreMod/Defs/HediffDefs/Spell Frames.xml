<Defs>
<!-- ==== Spell Frames ==== -->

  <ThingDef Abstract="True" Name="SpellFrameBaseSTNL">
    <thingClass>ThingWithComps</thingClass>
    <category>Item</category>
    <drawerType>MapMeshOnly</drawerType>
    <techLevel>Archotech</techLevel>
    <useHitPoints>true</useHitPoints>
    <pathCost>14</pathCost>
    <selectable>true</selectable>
    <altitudeLayer>Item</altitudeLayer>
    <tickerType>Never</tickerType>
	<statBases>
	<WorkToMake>5000</WorkToMake>
	<Flammability>0</Flammability>
	</statBases>
    <alwaysHaulable>true</alwaysHaulable>
    <resourceReadoutPriority>Middle</resourceReadoutPriority>
    <thingCategories>
      <li>BodyPartsBionic</li>
    </thingCategories>
    <comps>
      <li Class="CompProperties_UseEffectDestroySelf" />
    </comps>
  </ThingDef>
  
  <HediffDef Abstract="True" Name= "SpellFrameHediffBaseSTNL">
	<hediffClass>HediffWithComps</hediffClass>
</HediffDef>
  
  <!-- Standard Spell Frame -->

<ThingDef ParentName="SpellFrameBaseSTNL">
	<defName>VPE_StandardSpellFrameSNTL</defName>
	<label>Spell Frame: Standard</label>
	<description>An arm prosthesis allowing to regain psyfocus when striking foes, unlocks the "Blader" psy-tree. Restores 3% psyfocus upon hitting creatures with melee attacks.</description>
	<thingClass>ThingWithComps</thingClass>
	<descriptionHyperlinks>
		<HediffDef>VPE_StandardSpellFrameSNTL</HediffDef>
	</descriptionHyperlinks>
	<statBases>
		<MaxHitPoints>100</MaxHitPoints>
		<Beauty>0</Beauty>
		<Mass>1</Mass>
		<MarketValue>500</MarketValue>
		<DeteriorationRate>0</DeteriorationRate>
	</statBases>
	<costList>
		<Steel>50</Steel>
		<Plasteel>10</Plasteel>
		<ComponentIndustrial>3</ComponentIndustrial>
	</costList>
	<recipeMaker>
		<unfinishedThingDef>UnfinishedComponent</unfinishedThingDef>
		<researchPrerequisite>Machining</researchPrerequisite>
		<recipeUsers>
			<li>TableMachining</li>
		</recipeUsers>
		<useIngredientsForColor>false</useIngredientsForColor>
		<workSpeedStat>GeneralLaborSpeed</workSpeedStat>
		<workSkill>Crafting</workSkill>
		<effectWorking>Smith</effectWorking>
		<soundWorking>Recipe_Smith</soundWorking>
		<skillRequirements>
			<Crafting>5</Crafting>
		</skillRequirements>
		<displayPriority>310</displayPriority>
	</recipeMaker>
	<graphicData>
		<texPath>UI_BladerSTNL/Things/SpellFrameStandard</texPath>
		<graphicClass>Graphic_Single</graphicClass>
		<drawSize>1</drawSize>
	</graphicData>
	<comps>
		<li Class="CompProperties_Forbiddable"/>
		<li Class="CompProperties_Usable">
			<compClass>CompUsableImplant</compClass>
			<useJob>UseItem</useJob>
			<useLabel>Install {0_label} to become a blader</useLabel>
		</li>
		<li Class="CompProperties_UseEffectInstallImplant">
			<hediffDef>VPE_StandardSpellFrameSNTL</hediffDef>
			<bodyPart>Arm</bodyPart>
			<requiresPsychicallySensitive>False</requiresPsychicallySensitive>
		</li>
		<li MayRequire="Ludeon.Rimworld.Biotech" Class="CompProperties_UseEffectPlaySound">
			<soundOnUsed>MechlinkInstalled</soundOnUsed>
		</li>
	</comps>
</ThingDef>

<HediffDef>
	<defName>VPE_StandardSpellFrameSNTL</defName>
	<label>Spell Frame: Standard</label>
	<description>An arm prosthesis allowing to regain psyfocus when striking foes, unlocks the "Blader" psy-tree. Restores 3% psyfocus upon hitting creatures with melee attacks.</description>
	<hediffClass>HediffWithComps</hediffClass>
	<initialSeverity>1</initialSeverity>
	<minSeverity>0</minSeverity>
	<maxSeverity>1</maxSeverity>
	<defaultLabelColor>(0.7, 0, 0)</defaultLabelColor>
	<makesSickThought>False</makesSickThought>
	<scenarioCanAdd>false</scenarioCanAdd>
	<isBad>false</isBad>
	<everCurableByItem>false</everCurableByItem>
	<keepOnBodyPartRestoration>True</keepOnBodyPartRestoration>
	<comps>
		<li Class="VPE_Blader.HediffCompProperties_RestorePsyfocusOnHit">
			<psyfocusGain>0.03</psyfocusGain>
			<restoreOnMelee>True</restoreOnMelee>
			<restoreOnRanged>False</restoreOnRanged>
		</li>
		<li Class="VPE_Blader.HediffCompProperties_RemoveConflicting">
			<conflictingHediffs>
				<li>VPE_NecroSpellFrameSNTL</li>
				<li>VPE_ConstructSpellFrameSNTL</li>
				<li>VPE_ChurchSpellFrameSNTL</li>
			</conflictingHediffs>
		</li>
	</comps>
	<stages>
		<li>
		</li>
	</stages>
</HediffDef>

<!-- Necro Spell Frame -->

<ThingDef ParentName="SpellFrameBaseSTNL">
	<defName>VPE_NecroSpellFrameSNTL</defName>
	<label>Spell Frame: Necro</label>
	<description>A spell frame necessary to sustain various abilities, regenerates less psyfocus than the standard frame but allows regeneration from ranged attacks.\nUsing Piercing Claw with this frame will restore 30% psyfocus, dying with this frame allows it to be sacrificed to resurrect the user. (Anomaly required for the resurrection feature) Restores 1.5% psyfocus upon hitting a creature.</description>
	<thingClass>ThingWithComps</thingClass>
	<descriptionHyperlinks>
		<HediffDef>VPE_NecroSpellFrameSNTL</HediffDef>
	</descriptionHyperlinks>
	<statBases>
		<MaxHitPoints>100</MaxHitPoints>
		<Beauty>0</Beauty>
		<Mass>1</Mass>
		<MarketValue>500</MarketValue>
		<DeteriorationRate>0</DeteriorationRate>
	</statBases>
	<costList>
		<Steel>100</Steel>
		<ComponentIndustrial>5</ComponentIndustrial>
		<Bioferrite MayRequire= "Ludeon.Rimworld.Anomaly">25</Bioferrite>
		<Shard MayRequire= "Ludeon.Rimworld.Anomaly">1</Shard>
	</costList>
	<recipeMaker>
		<unfinishedThingDef>UnfinishedComponent</unfinishedThingDef>
		<researchPrerequisite>Machining</researchPrerequisite>
		<recipeUsers>
			<li>TableMachining</li>
		</recipeUsers>
		<useIngredientsForColor>false</useIngredientsForColor>
		<workSpeedStat>GeneralLaborSpeed</workSpeedStat>
		<workSkill>Crafting</workSkill>
		<effectWorking>Smith</effectWorking>
		<soundWorking>Recipe_Smith</soundWorking>
		<skillRequirements>
			<Crafting>5</Crafting>
		</skillRequirements>
		<displayPriority>310</displayPriority>
	</recipeMaker>
	<graphicData>
		<texPath>UI_BladerSTNL/Things/SpellFrameNecro</texPath>
		<graphicClass>Graphic_Single</graphicClass>
		<drawSize>1</drawSize>
	</graphicData>
	<comps>
		<li Class="CompProperties_Forbiddable"/>
		<li Class="CompProperties_Usable">
			<compClass>CompUsableImplant</compClass>
			<useJob>UseItem</useJob>
			<useLabel>Install {0_label} to become a blader</useLabel>
		</li>
		<li Class="CompProperties_UseEffectInstallImplant">
			<hediffDef>VPE_NecroSpellFrameSNTL</hediffDef>
			<bodyPart>Arm</bodyPart>
			<requiresPsychicallySensitive>False</requiresPsychicallySensitive>
		</li>
		<li MayRequire="Ludeon.Rimworld.Biotech" Class="CompProperties_UseEffectPlaySound">
			<soundOnUsed>MechlinkInstalled</soundOnUsed>
		</li>
	</comps>
</ThingDef>

<HediffDef ParentName="SpellFrameHediffBaseSTNL">
	<defName>VPE_NecroSpellFrameSNTL</defName>
	<label>Spell Frame: Necro</label>
	<description>An arm prosthesis allowing to regain psyfocus on attacking foes, regenerates less psyfocus than the standard frame but allows regeneration from ranged attacks.\nUsing Piercing Claw with this frame will restore 30% psyfocus, dying with this frame allows it to be sacrificed to resurrect the user. (Anomaly required for the resurrection feature) Restores 1.5% psyfocus upon hitting a creature.</description>
	<hediffClass>HediffWithComps</hediffClass>
	<initialSeverity>1</initialSeverity>
	<minSeverity>0</minSeverity>
	<maxSeverity>1</maxSeverity>
	<defaultLabelColor>(0.8, 0, 0)</defaultLabelColor>
	<makesSickThought>False</makesSickThought>
	<scenarioCanAdd>false</scenarioCanAdd>
	<isBad>false</isBad>
	<everCurableByItem>false</everCurableByItem>
	<keepOnBodyPartRestoration>True</keepOnBodyPartRestoration>
	<showGizmosOnCorpse>true</showGizmosOnCorpse>
	<comps>
		<li Class="VPE_Blader.HediffCompProperties_RestorePsyfocusOnHit">
			<psyfocusGain>0.015</psyfocusGain>
			<restoreOnMelee>True</restoreOnMelee>
			<restoreOnRanged>True</restoreOnRanged>
		</li>
		<li Class="VPE_Blader.HediffCompProperties_RemoveConflicting">
			<conflictingHediffs>
				<li>VPE_StandardSpellFrameSNTL</li>
				<li>VPE_ConstructSpellFrameSNTL</li>
				<li>VPE_ChurchSpellFrameSNTL</li>
			</conflictingHediffs>
		</li>
	</comps>
	<stages>
		<li>
		</li>
	</stages>
</HediffDef>

  <!-- Construct Spell Frame -->

<ThingDef ParentName="SpellFrameBaseSTNL">
	<defName>VPE_ConstructSpellFrameSNTL</defName>
	<label>Spell Frame: Construct</label>
	<description>A spell frame necessary to sustain various abilities. Restores 3% psyfocus on hitting creatures with melee attacks.\nShield won't drain psyfocus when blocking an attack.</description>
	<thingClass>ThingWithComps</thingClass>
	<descriptionHyperlinks>
		<HediffDef>VPE_ConstructSpellFrameSNTL</HediffDef>
	</descriptionHyperlinks>
	<statBases>
		<MaxHitPoints>100</MaxHitPoints>
		<Beauty>0</Beauty>
		<Mass>1</Mass>
		<MarketValue>500</MarketValue>
		<DeteriorationRate>0</DeteriorationRate>
	</statBases>
	<costList>
		<Steel>100</Steel>
		<Plasteel>15</Plasteel>
		<ComponentIndustrial>4</ComponentIndustrial>
	</costList>
	<recipeMaker>
		<unfinishedThingDef>UnfinishedComponent</unfinishedThingDef>
		<researchPrerequisite>Machining</researchPrerequisite>
		<recipeUsers>
			<li>TableMachining</li>
		</recipeUsers>
		<useIngredientsForColor>false</useIngredientsForColor>
		<workSpeedStat>GeneralLaborSpeed</workSpeedStat>
		<workSkill>Crafting</workSkill>
		<effectWorking>Smith</effectWorking>
		<soundWorking>Recipe_Smith</soundWorking>
		<skillRequirements>
			<Crafting>5</Crafting>
		</skillRequirements>
		<displayPriority>310</displayPriority>
	</recipeMaker>
	<graphicData>
		<texPath>UI_BladerSTNL/Things/SpellFrameConstruct</texPath>
		<graphicClass>Graphic_Single</graphicClass>
		<drawSize>1</drawSize>
	</graphicData>
	<comps>
		<li Class="CompProperties_Forbiddable"/>
		<li Class="CompProperties_Usable">
			<compClass>CompUsableImplant</compClass>
			<useJob>UseItem</useJob>
			<useLabel>Install {0_label} to become a blader</useLabel>
		</li>
		<li Class="CompProperties_UseEffectInstallImplant">
			<hediffDef>VPE_ConstructSpellFrameSNTL</hediffDef>
			<bodyPart>Arm</bodyPart>
			<requiresPsychicallySensitive>False</requiresPsychicallySensitive>
		</li>
		<li MayRequire="Ludeon.Rimworld.Biotech" Class="CompProperties_UseEffectPlaySound">
			<soundOnUsed>MechlinkInstalled</soundOnUsed>
		</li>
	</comps>
</ThingDef>

<HediffDef>
	<defName>VPE_ConstructSpellFrameSNTL</defName>
	<label>Spell Frame: Construct</label>
	<description>An arm prosthesis allowing to regain psyfocus when striking foes. Restores 3% psyfocus on hitting creatures with melee attacks.\nShield won't drain psyfocus when blocking an attack.</description>
	<hediffClass>HediffWithComps</hediffClass>
	<initialSeverity>1</initialSeverity>
	<minSeverity>0</minSeverity>
	<maxSeverity>1</maxSeverity>
	<defaultLabelColor>(0.3, 0.3, 0.7)</defaultLabelColor>
	<makesSickThought>False</makesSickThought>
	<scenarioCanAdd>false</scenarioCanAdd>
	<isBad>false</isBad>
	<everCurableByItem>false</everCurableByItem>
	<keepOnBodyPartRestoration>True</keepOnBodyPartRestoration>
	<comps>
		<li Class="VPE_Blader.HediffCompProperties_RestorePsyfocusOnHit">
			<psyfocusGain>0.03</psyfocusGain>
			<restoreOnMelee>True</restoreOnMelee>
			<restoreOnRanged>False</restoreOnRanged>
		</li>
		<li Class="VPE_Blader.HediffCompProperties_RemoveConflicting">
			<conflictingHediffs>
				<li>VPE_StandardSpellFrameSNTL</li>
				<li>VPE_NecroSpellFrameSNTL</li>
				<li>VPE_ChurchSpellFrameSNTL</li>
			</conflictingHediffs>
		</li>
	</comps>
	<stages>
		<li>
		</li>
	</stages>
</HediffDef>

  <!-- Church Spell Frame -->

<ThingDef ParentName="SpellFrameBaseSTNL">
	<defName>VPE_ChurchSpellFrameSNTL</defName>
	<label>Spell Frame: Church</label>
	<description>A spell frame necessary to sustain various abilities, this spell frame can draw energy from ambient psychic resonance at the cost of being unable to regenerate psyfocus from hitting creatures. Thunder Step will summon 2 additional lightning strikes when used with this frame.</description>
	<thingClass>ThingWithComps</thingClass>
	<descriptionHyperlinks>
		<HediffDef>VPE_ChurchSpellFrameSNTL</HediffDef>
	</descriptionHyperlinks>
	<statBases>
		<MaxHitPoints>100</MaxHitPoints>
		<Beauty>0</Beauty>
		<Mass>1</Mass>
		<MarketValue>500</MarketValue>
		<DeteriorationRate>0</DeteriorationRate>
	</statBases>
	<costList>
		<Steel>100</Steel>
		<Plasteel>20</Plasteel>
		<ComponentSpacer>1</ComponentSpacer>
	</costList>
	<recipeMaker>
		<unfinishedThingDef>UnfinishedComponent</unfinishedThingDef>
		<researchPrerequisite>Machining</researchPrerequisite>
		<recipeUsers>
			<li>TableMachining</li>
		</recipeUsers>
		<useIngredientsForColor>false</useIngredientsForColor>
		<workSpeedStat>GeneralLaborSpeed</workSpeedStat>
		<workSkill>Crafting</workSkill>
		<effectWorking>Smith</effectWorking>
		<soundWorking>Recipe_Smith</soundWorking>
		<skillRequirements>
			<Crafting>5</Crafting>
		</skillRequirements>
		<displayPriority>310</displayPriority>
	</recipeMaker>
	<graphicData>
		<texPath>UI_BladerSTNL/Things/SpellFrameChurch</texPath>
		<graphicClass>Graphic_Single</graphicClass>
		<drawSize>1</drawSize>
	</graphicData>
	<comps>
		<li Class="CompProperties_Forbiddable"/>
		<li Class="CompProperties_Usable">
			<compClass>CompUsableImplant</compClass>
			<useJob>UseItem</useJob>
			<useLabel>Install {0_label} to become a blader</useLabel>
		</li>
		<li Class="CompProperties_UseEffectInstallImplant">
			<hediffDef>VPE_ChurchSpellFrameSNTL</hediffDef>
			<bodyPart>Arm</bodyPart>
			<requiresPsychicallySensitive>False</requiresPsychicallySensitive>
		</li>
		<li MayRequire="Ludeon.Rimworld.Biotech" Class="CompProperties_UseEffectPlaySound">
			<soundOnUsed>MechlinkInstalled</soundOnUsed>
		</li>
	</comps>
</ThingDef>

<HediffDef>
	<defName>VPE_ChurchSpellFrameSNTL</defName>
	<label>Spell Frame: Church</label>
	<description>An arm prosthesis that unlocks the "Blader" psy-tree.\n\nUsing Thunder Step with this frame will summon 2 additional lightning strikes at the caster's location.\n\nSlowly restores psyfocus over time (0.5% per sec).</description>
	<hediffClass>HediffWithComps</hediffClass>
	<initialSeverity>1</initialSeverity>
	<minSeverity>0</minSeverity>
	<maxSeverity>1</maxSeverity>
	<defaultLabelColor>(1, 1, 0)</defaultLabelColor>
	<makesSickThought>False</makesSickThought>
	<scenarioCanAdd>false</scenarioCanAdd>
	<isBad>false</isBad>
	<everCurableByItem>false</everCurableByItem>
	<keepOnBodyPartRestoration>True</keepOnBodyPartRestoration>
	<comps>
	    <li Class="VPE_Blader.HediffCompProperties_PsyfocusRegen">
		<regenAmount>0.005</regenAmount>
		<tickInterval>60</tickInterval>
		</li>
		<li Class="VPE_Blader.HediffCompProperties_RestorePsyfocusOnHit">
			<psyfocusGain>0</psyfocusGain>
			<restoreOnMelee>False</restoreOnMelee>
			<restoreOnRanged>False</restoreOnRanged>
		</li>
		<li Class="VPE_Blader.HediffCompProperties_RemoveConflicting">
			<conflictingHediffs>
				<li>VPE_StandardSpellFrameSNTL</li>
				<li>VPE_NecroSpellFrameSNTL</li>
				<li>VPE_ConstructSpellFrameSNTL</li>
			</conflictingHediffs>
		</li>
	</comps>
	<stages>
		<li>
		</li>
	</stages>
</HediffDef>
</Defs>